import{j as e,F as t,a1 as s,d as a,a2 as n,a3 as o,U as l,r as i,c as r,a4 as c,X as d,a5 as x}from"./ui-vendor-DKQiA0eN.js";import{r as m,u as h,L as u}from"./react-vendor-UBAF-OWM.js";import{u as b,e as f,s as p,c as g}from"./index-Ci4fGroD.js";import{getDayOrder as j}from"./dayOrder-Bfid7LcI.js";import"./pdf-vendor-0-8C3xHX.js";import"./supabase-vendor-B9h0k0q2.js";function w({children:t}){const s=h(),[a,n]=m.useState(s),[o,l]=m.useState("fadeIn");m.useEffect(()=>{s!==a&&l("fadeOut")},[s,a]);return e.jsx("div",{className:"transition-opacity duration-300 "+("fadeIn"===o?"opacity-100":"opacity-0"),onTransitionEnd:()=>{"fadeOut"===o&&(l("fadeIn"),n(s))},children:t})}function v({children:v}){const N=h(),y=function(e){const[t,s]=m.useState(!1);return m.useEffect(()=>{const a=window.matchMedia(e);a.matches!==t&&s(a.matches);const n=()=>s(a.matches);return a.addEventListener("change",n),()=>a.removeEventListener("change",n)},[t,e]),t}("(min-width: 768px)"),{signOut:k}=b(),[S,E]=m.useState(!1);!function(){const{user:e}=b(),{notificationsEnabled:t,classReminders:s}=f(),a=m.useRef(new Set);m.useEffect(()=>{if(!e||!t||!s)return;const n=async()=>{const t=(new Date).toLocaleDateString("en-US",{weekday:"long"}),s=(new Date).toISOString().split("T")[0],n=j(s)||(["Saturday","Sunday"].includes(t)?"Monday":t),[o,l]=await Promise.all([p.from("timetable_entries").select("*").eq("user_id",e.id).eq("day",n),p.from("smart_timetable_entries").select("*").eq("user_id",e.id).eq("day",n)]),i=[...o.data||[],...l.data||[]],r=new Date,c=60*r.getHours()+r.getMinutes();i.forEach(e=>{const[t,n]=e.start_time.split(":").map(Number),o=60*t+n-c;if(o<=10&&o>0){const t=`${s}-${e.id}`;a.current.has(t)||(new Notification(`Upcoming Class: ${e.subject_name}`,{body:`Starts in ${o} minutes at ${e.room_number||"classroom"}.`,icon:"/icon.png"}),a.current.add(t))}})};n();const o=setInterval(n,6e4);return()=>clearInterval(o)},[e,t,s])}();const _=e=>N.pathname===e,I=({to:t,icon:s,label:a})=>e.jsxs(u,{to:t,className:g("group flex items-center gap-3 p-3 rounded-xl transition-all duration-200 border border-transparent mb-1",_(t)?"bg-blue-600 text-white shadow-md shadow-blue-900/20":"text-slate-400 hover:bg-slate-800 hover:text-slate-200"),children:[e.jsx(s,{className:g("h-5 w-5 transition-transform duration-300 group-hover:scale-110",_(t)?"stroke-white":"stroke-current")}),y&&e.jsx("span",{className:"font-bold text-sm tracking-wide",children:a})]});return e.jsxs("div",{className:"min-h-screen pb-24 relative font-sans selection:bg-indigo-100 selection:text-indigo-900 overflow-x-hidden bg-slate-50/50",children:[y&&e.jsxs("aside",{className:"fixed left-0 top-0 h-full w-64 bg-[#0F172A] border-r border-slate-800 z-50 p-6 flex flex-col justify-between text-slate-300",children:[e.jsxs("div",{className:"flex items-center gap-3 px-2 mb-12",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center text-white font-bold shadow-lg shadow-blue-500/20",children:e.jsx(t,{className:"h-6 w-6"})}),e.jsx("div",{children:e.jsx("span",{className:"block text-xl font-bold text-white tracking-tight",children:"IT Tracker"})})]}),e.jsxs("nav",{className:"space-y-1 flex-1 overflow-y-auto no-scrollbar py-2",children:[e.jsx(I,{to:"/",icon:s,label:"Dashboard"}),e.jsx(I,{to:"/schedule",icon:a,label:"Schedule"}),e.jsx(I,{to:"/tasks",icon:n,label:"Assignments"}),e.jsx(I,{to:"/notes",icon:t,label:"Notes"}),e.jsx(I,{to:"/attendance",icon:o,label:"Attendance"}),e.jsx(I,{to:"/profile",icon:l,label:"Profile"})]}),e.jsxs("button",{onClick:()=>k(),className:"flex items-center gap-3 p-3 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all mt-6 group font-bold text-sm",children:[e.jsx(i,{className:"h-5 w-5"}),e.jsx("span",{children:"Sign Out"})]})]}),e.jsx("div",{className:g("relative z-10 min-h-screen transition-all duration-300 ease-out",y?"ml-64 p-8":"pb-32 px-4 pt-6 max-w-lg mx-auto"),children:e.jsx("div",{className:g("mx-auto h-full",y?"max-w-6xl":""),children:e.jsx(w,{children:v})})}),!y&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:g("fixed inset-0 bg-slate-900/20 backdrop-blur-sm z-40 transition-all duration-300",S?"opacity-100 visible":"opacity-0 invisible pointer-events-none"),onClick:()=>E(!1)}),e.jsx("div",{className:g("fixed bottom-24 right-4 z-50 bg-white p-4 rounded-[2rem] shadow-2xl border border-slate-100 min-w-[200px] transform transition-all duration-300 origin-bottom-right",S?"scale-100 opacity-100 translate-y-0":"scale-90 opacity-0 translate-y-10 pointer-events-none"),children:e.jsx("div",{className:"flex flex-col gap-1",children:[{to:"/tasks",icon:r,label:"Assignments"},{to:"/notes",icon:t,label:"Notes"},{to:"/simulator",icon:c,label:"Simulator"}].map(t=>e.jsxs(u,{to:t.to,onClick:()=>E(!1),className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-slate-100 text-slate-600 group-hover:bg-slate-900 group-hover:text-white transition-colors",children:e.jsx(t.icon,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold text-slate-700 text-sm tracking-wide",children:t.label})]},t.to))})}),e.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50",children:e.jsxs("nav",{className:"bg-white/90 backdrop-blur-xl px-2 py-2 rounded-full flex items-center gap-2 shadow-2xl shadow-slate-200/50 ring-1 ring-slate-100",children:[[{to:"/",icon:s},{to:"/schedule",icon:a},{to:"/attendance",icon:r}].map(t=>e.jsx(u,{to:t.to,className:g("relative flex items-center justify-center w-12 h-12 rounded-full transition-all duration-300",_(t.to)?"bg-slate-900 text-white shadow-lg scale-105":"text-slate-400 hover:bg-slate-100 hover:text-slate-600"),children:e.jsx(t.icon,{className:"w-5 h-5"})},t.to)),e.jsx("div",{className:"w-px h-8 bg-slate-200 mx-1"}),e.jsx("button",{onClick:()=>E(!S),className:g("relative flex items-center justify-center w-12 h-12 rounded-full transition-all duration-300",S?"bg-slate-900 text-white rotate-90":"text-slate-400 hover:bg-slate-100 hover:text-slate-600"),children:S?e.jsx(d,{className:"w-5 h-5"}):e.jsx(x,{className:"w-5 h-5"})})]})})]})]})}export{v as Layout};
