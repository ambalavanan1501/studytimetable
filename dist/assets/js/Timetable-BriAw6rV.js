import{j as e,X as t,a,T as s,P as d,A as i,C as r,b as n,c as l,d as o,M as m}from"./ui-vendor-BLIzfsG8.js";import{r as c,R as y}from"./react-vendor-DR97ylRc.js";import{c as u,u as T,s as x,a as h}from"./index-DrLrQOgi.js";import{S as b}from"./SEO-CdnxbQFe.js";import"./pdf-vendor-D0-bFhii.js";import"./supabase-vendor-C9Ts7tiD.js";function p({isOpen:a,onClose:s,title:d,children:i,className:r}){return c.useEffect(()=>{const e=e=>{"Escape"===e.key&&s()};return a&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[a,s]),a?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:u("relative w-full bg-white/80 backdrop-blur-2xl rounded-[2rem] shadow-2xl overflow-hidden animate-scale-up border border-white/40",r),children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/20",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 tracking-tight",children:d}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-white/50 rounded-full transition-colors text-slate-500 hover:text-slate-900",children:e.jsx(t,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-5 max-h-[80vh] overflow-y-auto custom-scrollbar",children:i})]})}):null}const f=y.forwardRef(({className:t,children:s,isLoading:d,variant:i="primary",size:r="md",disabled:n,...l},o)=>e.jsxs("button",{ref:o,className:u("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{primary:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90"}[i],{sm:"h-9 px-3 text-xs",md:"h-10 px-4 py-2",lg:"h-11 px-8",icon:"h-10 w-10"}[r],t),disabled:n||d,...l,children:[d&&e.jsx(a,{className:"mr-2 h-4 w-4 animate-spin"}),s]}));f.displayName="Button";const j=y.forwardRef(({className:t,type:a,label:s,error:d,...i},r)=>e.jsxs("div",{className:"w-full space-y-2",children:[s&&e.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:s}),e.jsx("input",{type:a,className:u("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",d&&"border-destructive focus-visible:ring-destructive",t),ref:r,...i}),d&&e.jsx("p",{className:"text-sm text-destructive",children:d})]}));j.displayName="Input";const g={A1:[{day:"Monday",startTime:"08:00",endTime:"08:50"},{day:"Wednesday",startTime:"09:00",endTime:"09:50"}],A2:[{day:"Monday",startTime:"14:00",endTime:"14:50"},{day:"Wednesday",startTime:"15:00",endTime:"15:50"}],B1:[{day:"Tuesday",startTime:"08:00",endTime:"08:50"},{day:"Thursday",startTime:"09:00",endTime:"09:50"}],B2:[{day:"Tuesday",startTime:"14:00",endTime:"14:50"},{day:"Thursday",startTime:"15:00",endTime:"15:50"}],C1:[{day:"Wednesday",startTime:"08:00",endTime:"08:50"},{day:"Friday",startTime:"09:00",endTime:"09:50"}],C2:[{day:"Wednesday",startTime:"14:00",endTime:"14:50"},{day:"Friday",startTime:"15:00",endTime:"15:50"}],D1:[{day:"Thursday",startTime:"08:00",endTime:"08:50"},{day:"Monday",startTime:"10:00",endTime:"10:50"}],D2:[{day:"Thursday",startTime:"14:00",endTime:"14:50"},{day:"Monday",startTime:"16:00",endTime:"16:50"}],E1:[{day:"Friday",startTime:"08:00",endTime:"08:50"},{day:"Tuesday",startTime:"10:00",endTime:"10:50"}],E2:[{day:"Friday",startTime:"14:00",endTime:"14:50"},{day:"Tuesday",startTime:"16:00",endTime:"16:50"}],F1:[{day:"Monday",startTime:"09:00",endTime:"09:50"},{day:"Wednesday",startTime:"10:00",endTime:"10:50"}],F2:[{day:"Monday",startTime:"15:00",endTime:"15:50"},{day:"Wednesday",startTime:"16:00",endTime:"16:50"}],G1:[{day:"Tuesday",startTime:"09:00",endTime:"09:50"},{day:"Thursday",startTime:"10:00",endTime:"10:50"}],G2:[{day:"Tuesday",startTime:"15:00",endTime:"15:50"},{day:"Thursday",startTime:"16:00",endTime:"16:50"}],TA1:[{day:"Friday",startTime:"10:00",endTime:"10:50"}],TA2:[{day:"Friday",startTime:"16:00",endTime:"16:50"}],TB1:[{day:"Monday",startTime:"11:00",endTime:"11:50"}],TB2:[{day:"Monday",startTime:"17:00",endTime:"17:50"}],TC1:[{day:"Tuesday",startTime:"11:00",endTime:"11:50"}],TC2:[{day:"Tuesday",startTime:"17:00",endTime:"17:50"}],TD1:[{day:"Friday",startTime:"12:00",endTime:"12:50"}],TD2:[{day:"Wednesday",startTime:"17:00",endTime:"17:50"}],TE1:[{day:"Thursday",startTime:"11:00",endTime:"11:50"}],TE2:[{day:"Thursday",startTime:"17:00",endTime:"17:50"},{day:"Friday",startTime:"17:00",endTime:"17:50"}],TF1:[{day:"Friday",startTime:"11:00",endTime:"11:50"}],TF2:[{day:"Friday",startTime:"17:00",endTime:"17:50"}],TG1:[{day:"Monday",startTime:"12:00",endTime:"12:50"}],TG2:[{day:"Monday",startTime:"18:00",endTime:"18:50"}],TAA1:[{day:"Tuesday",startTime:"12:00",endTime:"12:50"}],TAA2:[{day:"Tuesday",startTime:"18:00",endTime:"18:50"}],V1:[{day:"Wednesday",startTime:"11:00",endTime:"11:50"}],V2:[{day:"Wednesday",startTime:"12:00",endTime:"12:50"}],TBB2:[{day:"Wednesday",startTime:"18:00",endTime:"18:50"}],TCC1:[{day:"Thursday",startTime:"12:00",endTime:"12:50"}],TCC2:[{day:"Thursday",startTime:"18:00",endTime:"18:50"}],TDD2:[{day:"Friday",startTime:"18:00",endTime:"18:50"}],L1:[{day:"Monday",startTime:"08:00",endTime:"08:50"}],L2:[{day:"Monday",startTime:"08:51",endTime:"09:40"}],L3:[{day:"Monday",startTime:"09:51",endTime:"10:40"}],L4:[{day:"Monday",startTime:"10:41",endTime:"11:30"}],L5:[{day:"Monday",startTime:"11:40",endTime:"12:30"}],L6:[{day:"Monday",startTime:"12:31",endTime:"13:20"}],L7:[{day:"Tuesday",startTime:"08:00",endTime:"08:50"}],L8:[{day:"Tuesday",startTime:"08:51",endTime:"09:40"}],L9:[{day:"Tuesday",startTime:"09:51",endTime:"10:40"}],L10:[{day:"Tuesday",startTime:"10:41",endTime:"11:30"}],L11:[{day:"Tuesday",startTime:"11:40",endTime:"12:30"}],L12:[{day:"Tuesday",startTime:"12:31",endTime:"13:20"}],L13:[{day:"Wednesday",startTime:"08:00",endTime:"08:50"}],L14:[{day:"Wednesday",startTime:"08:51",endTime:"09:40"}],L15:[{day:"Wednesday",startTime:"09:51",endTime:"10:40"}],L16:[{day:"Wednesday",startTime:"10:41",endTime:"11:30"}],L17:[{day:"Wednesday",startTime:"11:40",endTime:"12:30"}],L18:[{day:"Wednesday",startTime:"12:31",endTime:"13:20"}],L19:[{day:"Thursday",startTime:"08:00",endTime:"08:50"}],L20:[{day:"Thursday",startTime:"08:51",endTime:"09:40"}],L21:[{day:"Thursday",startTime:"09:51",endTime:"10:40"}],L22:[{day:"Thursday",startTime:"10:41",endTime:"11:30"}],L23:[{day:"Thursday",startTime:"11:40",endTime:"12:30"}],L24:[{day:"Thursday",startTime:"12:31",endTime:"13:20"}],L25:[{day:"Friday",startTime:"08:00",endTime:"08:50"}],L26:[{day:"Friday",startTime:"08:51",endTime:"09:40"}],L27:[{day:"Friday",startTime:"09:51",endTime:"10:40"}],L28:[{day:"Friday",startTime:"10:41",endTime:"11:30"}],L29:[{day:"Friday",startTime:"11:40",endTime:"12:30"}],L30:[{day:"Friday",startTime:"12:31",endTime:"13:20"}],L31:[{day:"Monday",startTime:"14:00",endTime:"14:50"}],L32:[{day:"Monday",startTime:"14:51",endTime:"15:40"}],L33:[{day:"Monday",startTime:"15:51",endTime:"16:40"}],L34:[{day:"Monday",startTime:"16:41",endTime:"17:30"}],L35:[{day:"Monday",startTime:"17:40",endTime:"18:30"}],L36:[{day:"Monday",startTime:"18:31",endTime:"19:20"}],L37:[{day:"Tuesday",startTime:"14:00",endTime:"14:50"}],L38:[{day:"Tuesday",startTime:"14:51",endTime:"15:40"}],L39:[{day:"Tuesday",startTime:"15:51",endTime:"16:40"}],L40:[{day:"Tuesday",startTime:"16:41",endTime:"17:30"}],L41:[{day:"Tuesday",startTime:"17:40",endTime:"18:30"}],L42:[{day:"Tuesday",startTime:"18:31",endTime:"19:20"}],L43:[{day:"Wednesday",startTime:"14:00",endTime:"14:50"}],L44:[{day:"Wednesday",startTime:"14:51",endTime:"15:40"}],L45:[{day:"Wednesday",startTime:"15:51",endTime:"16:40"}],L46:[{day:"Wednesday",startTime:"16:41",endTime:"17:30"}],L47:[{day:"Wednesday",startTime:"17:40",endTime:"18:30"}],L48:[{day:"Wednesday",startTime:"18:31",endTime:"19:20"}],L49:[{day:"Thursday",startTime:"14:00",endTime:"14:50"}],L50:[{day:"Thursday",startTime:"14:51",endTime:"15:40"}],L51:[{day:"Thursday",startTime:"15:51",endTime:"16:40"}],L52:[{day:"Thursday",startTime:"16:41",endTime:"17:30"}],L53:[{day:"Thursday",startTime:"17:40",endTime:"18:30"}],L54:[{day:"Thursday",startTime:"18:31",endTime:"19:20"}],L55:[{day:"Friday",startTime:"14:00",endTime:"14:50"}],L56:[{day:"Friday",startTime:"14:51",endTime:"15:40"}],L57:[{day:"Friday",startTime:"15:51",endTime:"16:40"}],L58:[{day:"Friday",startTime:"16:41",endTime:"17:30"}],L59:[{day:"Friday",startTime:"17:40",endTime:"18:30"}],L60:[{day:"Friday",startTime:"18:31",endTime:"19:20"}]};function v({isOpen:t,onClose:a,onSuccess:n}){const{user:l}=T(),[o,m]=c.useState(!1),[y,u]=c.useState([{subject_name:"",subject_code:"",type:"theory",slot:"",room_number:"",credit:0}]),[h,b]=c.useState(null),v=(e,t,a)=>{const s=[...y];s[e]={...s[e],[t]:a},u(s),b(null)};return e.jsxs(p,{isOpen:t,onClose:a,title:"Smart Add (FFCS Slots)",className:"max-w-4xl",children:[e.jsxs("div",{className:"space-y-6 py-4 max-h-[70vh] overflow-y-auto pr-2",children:[e.jsx("div",{className:"space-y-4",children:y.map((t,a)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end p-4 border rounded-lg bg-card",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Subject Name"}),e.jsx(j,{value:t.subject_name,onChange:e=>v(a,"subject_name",e.target.value),placeholder:"e.g. Python",className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Code"}),e.jsx(j,{value:t.subject_code,onChange:e=>v(a,"subject_code",e.target.value),placeholder:"CSE1001",className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Type"}),e.jsxs("select",{className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 mt-2",value:t.type,onChange:e=>v(a,"type",e.target.value),children:[e.jsx("option",{value:"theory",children:"Theory"}),e.jsx("option",{value:"lab",children:"Lab"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Slot(s)"}),e.jsx(j,{value:t.slot,onChange:e=>v(a,"slot",e.target.value),placeholder:"A1+TA1",className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Room"}),e.jsx(j,{value:t.room_number,onChange:e=>v(a,"room_number",e.target.value),placeholder:"SJT 101",className:"mt-2"})]}),e.jsx("div",{className:"md:col-span-1 flex justify-end",children:e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>(e=>{if(1===y.length)return;const t=y.filter((t,a)=>a!==e);u(t),b(null)})(a),disabled:1===y.length,className:"text-destructive hover:text-destructive h-10 w-10 p-0",children:e.jsx(s,{className:"h-4 w-4"})})})]},a))}),e.jsxs(f,{variant:"outline",onClick:()=>{u([...y,{subject_name:"",subject_code:"",type:"theory",slot:"",room_number:"",credit:0}])},className:"w-full",children:[e.jsx(d,{className:"mr-2 h-4 w-4"})," Add Another Course"]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(f,{onClick:()=>{const e=function(e){const t=[],a=[];return e.forEach(e=>{e.slot.toUpperCase().split("+").map(e=>e.trim()).forEach(s=>{const d=g[s];d?d.forEach(a=>{t.push({subject_name:e.subject_name,subject_code:e.subject_code,type:e.type,slot_code:s,slot_label:e.slot,room_number:e.room_number,credit:e.credit,day:a.day,start_time:a.startTime,end_time:a.endTime})}):a.push(`Invalid slot "${s}" for subject "${e.subject_name}"`)})}),{entries:t,errors:a}}(y);b(e)},disabled:y.some(e=>!e.slot||!e.subject_name),children:"Generate Preview"})}),h&&e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsx("h3",{className:"font-semibold",children:"Preview"}),h.errors.length>0?e.jsxs("div",{className:"p-4 bg-destructive/10 text-destructive rounded-md space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[e.jsx(i,{className:"h-4 w-4"}),"Errors Found"]}),e.jsx("ul",{className:"list-disc list-inside text-sm",children:h.errors.map((t,a)=>e.jsx("li",{children:t},a))})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-md flex items-center gap-2",children:[e.jsx(r,{className:"h-4 w-4"}),h.entries.length," sessions generated successfully."]}),e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left",children:"Subject"}),e.jsx("th",{className:"p-2 text-left",children:"Slot"}),e.jsx("th",{className:"p-2 text-left",children:"Day"}),e.jsx("th",{className:"p-2 text-left",children:"Time"}),e.jsx("th",{className:"p-2 text-left",children:"Room"})]})}),e.jsx("tbody",{children:h.entries.map((t,a)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2",children:t.subject_name}),e.jsx("td",{className:"p-2",children:t.slot_code}),e.jsx("td",{className:"p-2",children:t.day}),e.jsxs("td",{className:"p-2",children:[t.start_time," - ",t.end_time]}),e.jsx("td",{className:"p-2",children:t.room_number})]},a))})]})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(f,{variant:"outline",onClick:a,children:"Cancel"}),e.jsx(f,{onClick:async()=>{if(l&&h&&!(h.errors.length>0)){m(!0);try{const e=h.entries.map(e=>({user_id:l.id,day:e.day,start_time:e.start_time,end_time:e.end_time,subject_name:e.subject_name,subject_code:e.subject_code,type:e.type,room_number:e.room_number,slot_code:e.slot_code,slot_label:e.slot_label,credit:e.credit})),{error:t}=await x.from("smart_timetable_entries").insert(e);if(t)throw t;n(),a(),u([{subject_name:"",subject_code:"",type:"theory",slot:"",room_number:"",credit:0}]),b(null)}catch(e){alert("Failed to save timetable entries.")}finally{m(!1)}}},disabled:!h||h.errors.length>0||o,isLoading:o,children:"Save Timetable"})]})]})}const N={Sunday:"SU",Monday:"MO",Tuesday:"TU",Wednesday:"WE",Thursday:"TH",Friday:"FR",Saturday:"SA"},w={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6};function _(e,t){const[a,s]=t.split(":").map(Number),d=new Date(e);return d.setHours(a,s,0,0),d.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z"}function L(e){const t=(new Date).toISOString().replace(/[-:]/g,"").split(".")[0]+"Z";let a=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//CGPA Calculator//Student Timetable//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH"];return e.forEach(e=>{const s=function(e){const t=new Date,a=new Date(t);let s=w[e]-t.getDay();return s<=0&&(s+=7),a.setDate(t.getDate()+s),a}(e.day),d=_(s,e.start_time),i=_(s,e.end_time),r=N[e.day];a=a.concat(["BEGIN:VEVENT",`UID:${crypto.randomUUID()}`,`DTSTAMP:${t}`,`DTSTART:${d}`,`DTEND:${i}`,`RRULE:FREQ=WEEKLY;BYDAY=${r}`,`SUMMARY:${e.subject_name} (${e.subject_code})`,`DESCRIPTION:Class Type: ${e.type||"Class"}`,e.location?`LOCATION:${e.location}`:"","STATUS:CONFIRMED","END:VEVENT"])}),a.push("END:VCALENDAR"),a.filter(e=>e).join("\r\n")}function C(){const{user:t}=T(),{addToast:s}=h(),[d,i]=c.useState(!1);return e.jsxs("button",{onClick:async()=>{if(t){i(!0);try{const{data:e,error:a}=await x.from("timetable_entries").select("*").eq("user_id",t.id);if(a)throw a;const{data:d,error:i}=await x.from("smart_timetable_entries").select("*").eq("user_id",t.id);if(i)throw i;const r=[...e||[],...d||[]];if(0===r.length)return void s("No classes to export!","info");const n=r.map(e=>({subject_name:e.subject_name,subject_code:e.subject_code,day:e.day,start_time:e.start_time,end_time:e.end_time,location:e.room_number||void 0,type:e.type}));!function(e,t="timetable.ics"){const a=new Blob([e],{type:"text/calendar;charset=utf-8"}),s=document.createElement("a");s.href=window.URL.createObjectURL(a),s.setAttribute("download",t),document.body.appendChild(s),s.click(),document.body.removeChild(s)}(L(n),"my-timetable.ics"),s("Calendar exported successfully!","success")}catch(e){s("Failed to export calendar","error")}finally{i(!1)}}},disabled:d,className:u("glass-button px-4 py-2 rounded-full flex items-center gap-2 text-sm font-bold text-slate-600 hover:text-indigo-600 hover:bg-white/40 transition-all",d&&"opacity-70 cursor-not-allowed"),title:"Export to Calendar",children:[d?e.jsx(a,{className:"h-4 w-4 animate-spin"}):e.jsx(n,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Sync Calendar"})]})}function S(){const{user:t}=T(),[a,s]=c.useState(!1),[i,r]=c.useState("Monday"),[n,y]=c.useState([]),[h,p]=c.useState({}),[f,j]=c.useState(75),[g,N]=c.useState(!0),w=["Monday","Tuesday","Wednesday","Thursday","Friday"];c.useEffect(()=>{const e=(new Date).toLocaleDateString("en-US",{weekday:"long"});w.includes(e)&&r(e)},[]),c.useEffect(()=>{(async()=>{if(t)try{const{data:e}=await x.from("attendance_logs").select("subject_code, status").select("subject_code, status").eq("user_id",t.id),{data:a}=await x.from("profiles").select("attendance_goal").eq("id",t.id).single();(null==a?void 0:a.attendance_goal)&&j(a.attendance_goal);const s={};if(e){const t={};e.forEach(e=>{t[e.subject_code]||(t[e.subject_code]={present:0,total:0}),t[e.subject_code].total++,"present"===e.status&&t[e.subject_code].present++}),Object.keys(t).forEach(e=>{const{present:a,total:d}=t[e];s[e]=d>0?Math.round(a/d*100):0})}p(s)}catch(e){}})()},[t]);const _=c.useCallback(async()=>{if(t){N(!0);try{const[e,a]=await Promise.all([x.from("timetable_entries").select("*").eq("user_id",t.id).eq("day",i),x.from("smart_timetable_entries").select("*").eq("user_id",t.id).eq("day",i)]);e.error,a.error;const s=[...e.data||[],...a.data||[]];s.sort((e,t)=>e.start_time.localeCompare(t.start_time)),y(s)}catch(e){}finally{N(!1)}}else N(!1)},[t,i]);c.useEffect(()=>{_()},[_]);const L=e=>{const[t,a]=e.split(":"),s=parseInt(t);return`${s%12||12}:${a} ${s>=12?"PM":"AM"}`};return e.jsxs("div",{className:"pb-32 space-y-10 animate-fade-in-up",children:[e.jsx(b,{title:"Schedule",description:"Manage your class timetable and track attendance."}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4 mt-4 px-2",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-3xl md:text-5xl font-semibold text-slate-900 tracking-tighter leading-none",children:"Schedule"}),e.jsx("p",{className:"text-lg text-slate-500 font-medium font-display tracking-wide",children:"Your week at a glance."})]}),e.jsx(C,{})]}),e.jsx("div",{className:"sticky top-4 z-40 mx-auto max-w-fit",children:e.jsx("div",{className:"glass-vision rounded-full p-2 flex gap-1 shadow-2xl backdrop-blur-3xl border border-white/60 overflow-x-auto no-scrollbar max-w-full",children:w.map(t=>e.jsxs("button",{onClick:()=>r(t),className:u("relative px-6 py-3 rounded-full text-sm font-bold transition-all duration-300 ease-out flex-shrink-0",i===t?"text-white shadow-lg scale-105":"text-slate-500 hover:text-slate-900 hover:bg-white/40"),children:[i===t&&e.jsx("div",{className:"absolute inset-0 bg-slate-900 rounded-full -z-10 animate-breathe"}),e.jsx("span",{className:"tracking-wide",children:t.slice(0,3)})]},t))})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 min-h-[50vh]",children:g?e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-20",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin mb-6"}),e.jsx("p",{className:"font-bold text-slate-400 animate-pulse tracking-widest uppercase text-xs",children:"Loading..."})]}):0===n.length?e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-center",children:[e.jsx("div",{className:"w-32 h-32 glass-vision rounded-[2.5rem] flex items-center justify-center mb-8 shadow-xl animate-float",children:e.jsx(l,{className:"h-12 w-12 text-slate-300"})}),e.jsx("h3",{className:"text-3xl font-bold text-slate-800 mb-2 tracking-tight",children:"No classes"}),e.jsx("p",{className:"text-slate-400 font-medium mb-10 text-lg",children:"Enjoy your free time!"}),e.jsxs("button",{onClick:()=>s(!0),className:"glass-button px-8 py-4 rounded-full text-slate-700 font-bold hover:scale-105 transition-transform flex items-center gap-3",children:[e.jsx(d,{className:"h-5 w-5"}),e.jsx("span",{children:"Add Class"})]})]}):n.map((t,a)=>e.jsx("div",{className:"group animate-fade-in-up opacity-0",style:{animationDelay:.1*a+"s"},children:e.jsxs("div",{className:"glass-vision p-5 rounded-[1.5rem] h-full flex flex-col relative overflow-hidden group-hover:bg-white/50 transition-all duration-500 hover:shadow-2xl hover:-translate-y-2",children:[e.jsx("div",{className:u("absolute left-0 top-0 bottom-0 w-3","theory"===t.type?"bg-indigo-500":"bg-pink-500")}),e.jsxs("div",{className:"flex justify-between items-start mb-6 pl-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx("span",{className:"glass-panel px-3 py-1 rounded-lg text-[10px] font-black text-slate-500 uppercase tracking-widest",children:t.subject_code})}),e.jsx("h3",{className:"font-bold text-lg md:text-xl text-slate-800 leading-tight tracking-tight",children:t.subject_name}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:u("text-xs font-bold uppercase tracking-wider","theory"===t.type?"text-indigo-500":"text-pink-500"),children:t.type})})]}),void 0!==h[t.subject_code]&&e.jsxs("div",{className:u("px-3 py-1.5 rounded-full text-xs font-bold shadow-sm border border-white/50 backdrop-blur-md",h[t.subject_code]>=f?"bg-emerald-100/50 text-emerald-700":h[t.subject_code]>=f-10?"bg-amber-100/50 text-amber-700":"bg-red-100/50 text-red-700"),children:[h[t.subject_code],"%"]})]}),e.jsxs("div",{className:"mt-auto pl-4 pt-6 border-t border-white/20 flex items-center justify-between text-slate-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"font-bold text-sm bg-white/40 px-3 py-1 rounded-lg",children:L(t.start_time)})]}),t.room_number&&e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-widest text-slate-400",children:[e.jsx(m,{className:"h-4 w-4"}),t.room_number]})]})]})},t.id))}),e.jsx("button",{onClick:()=>s(!0),className:"fixed bottom-24 right-8 w-14 h-14 glass-vision bg-slate-900/90 text-white rounded-[1.5rem] shadow-2xl z-50 flex items-center justify-center hover:scale-110 active:scale-95 transition-all duration-300 group ring-1 ring-white/20",children:e.jsx(d,{className:"h-6 w-6 group-hover:rotate-90 transition-transform duration-500"})}),e.jsx(v,{isOpen:a,onClose:()=>s(!1),onSuccess:_})]})}export{S as Timetable};
