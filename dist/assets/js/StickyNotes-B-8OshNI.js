import{j as e,h as t,F as s,i as a,P as r,T as o}from"./ui-vendor-BLIzfsG8.js";import{r as l}from"./react-vendor-DR97ylRc.js";import{d as n}from"./db-CqolmD4V.js";import{E as i,a as d}from"./pdf-vendor-D0-bFhii.js";function c(){const[c,m]=l.useState([]),[x,p]=l.useState(!0);l.useEffect(()=>{h()},[]);const h=async()=>{try{const e=await n.getAllNotes();m(e.sort((e,t)=>t.updatedAt.getTime()-e.updatedAt.getTime()))}catch(e){}finally{p(!1)}},u=async()=>{const e={id:crypto.randomUUID(),title:"Untitled Note",content:"",updatedAt:new Date};await n.saveNote(e),m([e,...c])};return e.jsxs("div",{className:"min-h-screen p-2 md:p-6 pb-24 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold text-slate-800 tracking-tight",children:"Sticky Notes"}),e.jsx("p",{className:"text-slate-400 font-medium md:-mt-1 text-sm",children:"Capture your thougths instantly."})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>{const e=JSON.stringify(c,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="sticky_notes.json",document.body.appendChild(a),a.click(),document.body.removeChild(a)},className:"flex items-center gap-2 bg-white text-slate-600 px-4 py-2.5 rounded-xl hover:bg-slate-50 hover:text-primary-600 transition-all shadow-sm border border-slate-100 font-bold text-sm group",title:"Export JSON",children:[e.jsx(t,{className:"h-4 w-4 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"hidden sm:inline",children:"JSON"})]}),e.jsxs("button",{onClick:()=>{const e=new i;e.text("Sticky Notes",14,15);const t=c.map(e=>[e.updatedAt.toLocaleDateString(),e.content]);d(e,{head:[["Date","Content"]],body:t,startY:20}),e.save("sticky_notes.pdf")},className:"flex items-center gap-2 bg-white text-slate-600 px-4 py-2.5 rounded-xl hover:bg-slate-50 hover:text-primary-600 transition-all shadow-sm border border-slate-100 font-bold text-sm group",title:"Export PDF",children:[e.jsx(s,{className:"h-4 w-4 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"hidden sm:inline",children:"PDF"})]}),e.jsxs("label",{className:"flex items-center gap-2 bg-white text-slate-600 px-4 py-2.5 rounded-xl hover:bg-slate-50 hover:text-primary-600 transition-all shadow-sm border border-slate-100 font-bold text-sm cursor-pointer group",children:[e.jsx(a,{className:"h-4 w-4 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"hidden sm:inline",children:"Import"}),e.jsx("input",{type:"file",accept:".json",onChange:e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(!s)return;const a=new FileReader;a.onload=async e=>{var t;try{const s=JSON.parse(null==(t=e.target)?void 0:t.result);if(Array.isArray(s)){for(const e of s){const t={...e,updatedAt:new Date(e.updatedAt)};await n.saveNote(t)}h(),alert("Notes imported successfully!")}}catch(s){alert("Failed to import notes. Invalid format.")}},a.readAsText(s)},className:"hidden"})]}),e.jsxs("button",{onClick:u,className:"flex items-center gap-2 bg-slate-800 text-white px-6 py-2.5 rounded-xl hover:bg-slate-900 transition-all shadow-lg shadow-slate-300 ml-2 hover:translate-y-[-2px] active:scale-95",children:[e.jsx(r,{className:"h-5 w-5"}),e.jsx("span",{className:"font-bold",children:"New Note"})]})]})]}),x?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mb-4"}),e.jsx("p",{className:"font-medium animate-pulse",children:"Loading notes..."})]}):0===c.length?e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-yellow-50 rounded-[2rem] flex items-center justify-center mb-6 shadow-inner ring-1 ring-yellow-100",children:e.jsx(s,{className:"h-10 w-10 text-yellow-500 opacity-50"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-700",children:"Your mind is clear"}),e.jsx("p",{className:"text-slate-400 font-medium mb-8 max-w-xs mx-auto",children:"Create a note to remember ideas, tasks, or important info."}),e.jsxs("button",{onClick:u,className:"text-primary-600 font-bold hover:bg-primary-50 px-6 py-2.5 rounded-full transition-colors flex items-center gap-2",children:[e.jsx(r,{className:"h-4 w-4"}),"Create first note"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 auto-rows-[200px]",children:c.map(t=>e.jsxs("div",{className:"glass-card p-4 rounded-[1.5rem] flex flex-col relative group transition-all duration-300 hover:shadow-xl hover:-translate-y-1 bg-gradient-to-br from-white/90 to-white/50 backdrop-blur-xl border border-white/60",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-300 to-yellow-100 opacity-50 group-hover:opacity-100 transition-opacity"}),e.jsx("textarea",{value:t.content,onChange:e=>(async(e,t)=>{const s=c.find(t=>t.id===e);if(s){const a={...s,content:t,updatedAt:new Date};await n.saveNote(a),m(c.map(t=>t.id===e?a:t))}})(t.id,e.target.value),placeholder:"Type your note here...",className:"flex-1 bg-transparent border-none resize-none focus:ring-0 text-slate-700 placeholder:text-slate-300 p-0 text-lg font-medium leading-relaxed selection:bg-yellow-100 selection:text-yellow-700",spellCheck:!1}),e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-slate-50",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest bg-slate-50 px-2 py-1 rounded-lg",children:t.updatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"})}),e.jsx("button",{onClick:()=>(async e=>{confirm("Delete this note?")&&(await n.deleteNote(e),m(c.filter(t=>t.id!==e)))})(t.id),className:"p-2 hover:bg-red-50 text-slate-300 hover:text-red-500 rounded-xl transition-all opacity-0 group-hover:opacity-100",title:"Delete Note",children:e.jsx(o,{className:"h-4 w-4"})})]})]},t.id))})]})}export{c as StickyNotes};
