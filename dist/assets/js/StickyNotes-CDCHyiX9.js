import{j as e,V as t,s,F as a,t as n,h as o,T as l}from"./ui-vendor-yoAZ-FXJ.js";import{e as r,r as i}from"./react-vendor-DR97ylRc.js";import{d}from"./index-CNb4MtWx.js";import{E as c,a as m}from"./pdf-vendor-CnZj0n1s.js";import"./supabase-vendor-C9Ts7tiD.js";function x(){const x=r(),[p,h]=i.useState([]),[u,g]=i.useState(!0);i.useEffect(()=>{f()},[]);const f=async()=>{try{const e=await d.getAllNotes();h(e.sort((e,t)=>t.updatedAt.getTime()-e.updatedAt.getTime()))}catch(e){}finally{g(!1)}};return e.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 pb-24",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>x(-1),className:"p-2 bg-white rounded-full shadow-sm hover:bg-slate-100 transition-colors",children:e.jsx(t,{className:"h-6 w-6 text-slate-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Sticky Notes"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>{const e=JSON.stringify(p,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="sticky_notes.json",document.body.appendChild(a),a.click(),document.body.removeChild(a)},className:"flex items-center gap-2 bg-white text-slate-600 px-3 py-2 rounded-lg hover:bg-slate-50 transition-colors shadow-sm text-sm font-medium",title:"Export JSON",children:[e.jsx(s,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"JSON"})]}),e.jsxs("button",{onClick:()=>{const e=new c;e.text("Sticky Notes",14,15);const t=p.map(e=>[e.updatedAt.toLocaleDateString(),e.content]);m(e,{head:[["Date","Content"]],body:t,startY:20}),e.save("sticky_notes.pdf")},className:"flex items-center gap-2 bg-white text-slate-600 px-3 py-2 rounded-lg hover:bg-slate-50 transition-colors shadow-sm text-sm font-medium",title:"Export PDF",children:[e.jsx(a,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"PDF"})]}),e.jsxs("label",{className:"flex items-center gap-2 bg-white text-slate-600 px-3 py-2 rounded-lg hover:bg-slate-50 transition-colors shadow-sm text-sm font-medium cursor-pointer",children:[e.jsx(n,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Import"}),e.jsx("input",{type:"file",accept:".json",onChange:e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(!s)return;const a=new FileReader;a.onload=async e=>{var t;try{const s=JSON.parse(null==(t=e.target)?void 0:t.result);if(Array.isArray(s)){for(const e of s){const t={...e,updatedAt:new Date(e.updatedAt)};await d.saveNote(t)}f(),alert("Notes imported successfully!")}}catch(s){alert("Failed to import notes. Invalid format.")}},a.readAsText(s)},className:"hidden"})]}),e.jsxs("button",{onClick:async()=>{const e={id:crypto.randomUUID(),title:"Untitled Note",content:"",updatedAt:new Date};await d.saveNote(e),h([e,...p])},className:"flex items-center gap-2 bg-primary-600 text-white px-4 py-2 rounded-full hover:bg-primary-700 transition-colors shadow-md ml-2",children:[e.jsx(o,{className:"h-5 w-5"}),e.jsx("span",{children:"New Note"})]})]})]}),u?e.jsx("div",{className:"text-center py-10 text-slate-500",children:"Loading notes..."}):0===p.length?e.jsx("div",{className:"text-center py-20 text-slate-400",children:e.jsx("p",{children:"No notes yet. Create one to get started!"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(t=>e.jsxs("div",{className:"glass-card p-4 rounded-2xl flex flex-col h-64 relative group transition-all hover:shadow-lg bg-yellow-50/50 border-yellow-100",children:[e.jsx("textarea",{value:t.content,onChange:e=>(async(e,t)=>{const s=p.find(t=>t.id===e);if(s){const a={...s,content:t,updatedAt:new Date};await d.saveNote(a),h(p.map(t=>t.id===e?a:t))}})(t.id,e.target.value),placeholder:"Type your note here...",className:"flex-1 bg-transparent border-none resize-none focus:ring-0 text-slate-700 placeholder:text-slate-400 p-0 text-lg leading-relaxed"}),e.jsxs("div",{className:"flex justify-between items-center mt-4 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("span",{className:"text-xs text-slate-400",children:t.updatedAt.toLocaleDateString()}),e.jsx("button",{onClick:()=>(async e=>{confirm("Delete this note?")&&(await d.deleteNote(e),h(p.filter(t=>t.id!==e)))})(t.id),className:"p-2 hover:bg-red-50 text-slate-400 hover:text-red-500 rounded-full transition-colors",children:e.jsx(l,{className:"h-4 w-4"})})]})]},t.id))})]})}export{x as StickyNotes};
