import{j as e,m as t,F as s,n as a,P as l,K as r,T as o}from"./ui-vendor-DKQiA0eN.js";import{r as n}from"./react-vendor-UBAF-OWM.js";import{d as i}from"./db-D0LAGLHJ.js";import{E as d,a as c}from"./pdf-vendor-0-8C3xHX.js";import{c as m}from"./index-Ci4fGroD.js";import{S as x}from"./SEO-DlDTCelI.js";import"./supabase-vendor-B9h0k0q2.js";function p(){const[p,h]=n.useState([]),[u,b]=n.useState(!0);n.useEffect(()=>{f()},[]);const f=async()=>{try{const e=await i.getAllNotes();h(e.sort((e,t)=>t.updatedAt.getTime()-e.updatedAt.getTime()))}catch(e){}finally{b(!1)}},g=async()=>{const e={id:crypto.randomUUID(),title:"Untitled Note",content:"",updatedAt:new Date};await i.saveNote(e),h([e,...p])};return e.jsxs("div",{className:"min-h-screen p-2 md:p-6 pb-24 space-y-8",children:[e.jsx(x,{title:"Sticky Notes",description:"Quick thoughts."}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold text-slate-800 tracking-tight",children:"Sticky Notes"}),e.jsx("p",{className:"text-slate-400 font-medium md:-mt-1 text-sm",children:"Capture your thoughts."})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>{const e=JSON.stringify(p,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="sticky_notes.json",document.body.appendChild(a),a.click(),document.body.removeChild(a)},className:"flex items-center gap-2 bg-white text-slate-600 px-4 py-2.5 rounded-xl hover:bg-slate-50 transition-all shadow-sm border border-slate-200 font-bold text-sm",children:[e.jsx(t,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"JSON"})]}),e.jsxs("button",{onClick:()=>{const e=new d;e.text("Sticky Notes",14,15);const t=p.map(e=>[e.updatedAt.toLocaleDateString(),e.content]);c(e,{head:[["Date","Content"]],body:t,startY:20}),e.save("sticky_notes.pdf")},className:"flex items-center gap-2 bg-white text-slate-600 px-4 py-2.5 rounded-xl hover:bg-slate-50 transition-all shadow-sm border border-slate-200 font-bold text-sm",children:[e.jsx(s,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"PDF"})]}),e.jsxs("label",{className:"flex items-center gap-2 bg-white text-slate-600 px-4 py-2.5 rounded-xl hover:bg-slate-50 transition-all shadow-sm border border-slate-200 font-bold text-sm cursor-pointer",children:[e.jsx(a,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Import"}),e.jsx("input",{type:"file",accept:".json",onChange:e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(!s)return;const a=new FileReader;a.onload=async e=>{var t;try{const s=JSON.parse(null==(t=e.target)?void 0:t.result);if(Array.isArray(s)){for(const e of s){const t={...e,updatedAt:new Date(e.updatedAt)};await i.saveNote(t)}f(),alert("Notes imported successfully!")}}catch(s){alert("Failed to import notes. Invalid format.")}},a.readAsText(s)},className:"hidden"})]}),e.jsxs("button",{onClick:g,className:"flex items-center gap-2 bg-slate-900 text-white px-6 py-2.5 rounded-xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-300 ml-2",children:[e.jsx(l,{className:"h-5 w-5"}),e.jsx("span",{className:"font-bold",children:"New Note"})]})]})]}),u?e.jsx("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:e.jsx("div",{className:"animate-pulse",children:"Loading notes..."})}):0===p.length?e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-amber-50 rounded-2xl flex items-center justify-center mb-6 border border-amber-100",children:e.jsx(r,{className:"h-8 w-8 text-amber-400"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-700",children:"Empty Board"}),e.jsx("p",{className:"text-slate-400 font-medium mb-8",children:"Add a note to get started."}),e.jsx("button",{onClick:g,className:"text-amber-500 font-bold hover:bg-amber-50 px-6 py-2.5 rounded-full transition-colors",children:"Create first note"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 auto-rows-[220px]",children:p.map((t,s)=>e.jsxs("div",{className:m("p-5 rounded-[1.25rem] flex flex-col relative group transition-all duration-200 hover:shadow-lg hover:-translate-y-1 border",s%3==0?"bg-amber-50 border-amber-100":s%3==1?"bg-blue-50 border-blue-100":"bg-rose-50 border-rose-100"),children:[e.jsx("textarea",{value:t.content,onChange:e=>(async(e,t)=>{const s=p.find(t=>t.id===e);if(s){const a={...s,content:t,updatedAt:new Date};await i.saveNote(a),h(p.map(t=>t.id===e?a:t))}})(t.id,e.target.value),placeholder:"Type here...",className:"flex-1 bg-transparent border-none resize-none focus:ring-0 text-slate-800 placeholder:text-slate-300 p-0 text-lg font-medium leading-relaxed",spellCheck:!1}),e.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-slate-900/5",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:t.updatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"})}),e.jsx("button",{onClick:()=>(async e=>{confirm("Delete this note?")&&(await i.deleteNote(e),h(p.filter(t=>t.id!==e)))})(t.id),className:"p-1.5 hover:bg-white/50 text-slate-400 hover:text-red-500 rounded-lg transition-all opacity-0 group-hover:opacity-100",children:e.jsx(o,{className:"h-4 w-4"})})]})]},t.id))})]})}export{p as StickyNotes};
