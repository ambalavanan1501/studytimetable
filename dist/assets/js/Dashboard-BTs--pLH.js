import{j as e,e as t,d as s,f as a,g as l,T as n,S as r,X as i,B as d,P as o,F as c,R as x,h as m,i as u,k as h,l as f,m as g,n as p,c as j,o as b,p as N,a as v,U as w,q as y,M as k,r as S}from"./ui-vendor-cRf8bXM2.js";import{f as C,r as _,b as T}from"./react-vendor-UBAF-OWM.js";import{a as D,c as A,u as I,s as P,b as q}from"./index-BHdFRAsM.js";import{d as z}from"./db-CqolmD4V.js";import{S as E}from"./SEO-CM7liykF.js";import{u as G,C as O,a as F,b as M,D as L,c as R,S as U,r as B,d as Y,s as H,K as J,P as Q}from"./dnd-vendor-DLvn8sRR.js";import{I as V,B as W,M as $}from"./input-unlgE82K.js";import{g as K,b as X}from"./ai-DP1zq5fw.js";import"./pdf-vendor-0-8C3xHX.js";import"./supabase-vendor-B9h0k0q2.js";function Z(){const s=C(),[a,l]=_.useState(null);_.useEffect(()=>{n()},[]);const n=async()=>{const e=await z.getAllNotes();if(e.length>0){const t=e.sort((e,t)=>t.updatedAt.getTime()-e.updatedAt.getTime())[0];l(t)}else{const e={id:"quick-note",title:"Quick Note",content:"",updatedAt:new Date};await z.saveNote(e),l(e)}};return e.jsxs("div",{className:"glass-card p-5 rounded-3xl relative group h-full flex flex-col bg-yellow-50/30 border-yellow-100/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-400"}),"Quick Note"]}),e.jsx("button",{onClick:()=>s("/notes"),className:"p-1.5 rounded-full hover:bg-yellow-100 text-slate-400 hover:text-yellow-600 transition-colors",children:e.jsx(t,{className:"h-4 w-4"})})]}),e.jsx("textarea",{value:(null==a?void 0:a.content)||"",onChange:e=>(async e=>{if(a){const t={...a,title:a.title||"Quick Note",content:e,updatedAt:new Date};l(t),await z.saveNote(t)}})(e.target.value),placeholder:"Jot something down...",className:"flex-1 w-full bg-transparent border-none resize-none focus:ring-0 text-slate-600 placeholder:text-slate-400 p-0 text-sm leading-relaxed"})]})}function ee(){const a=C(),[l,n]=_.useState(null),[r,i]=_.useState(null);_.useEffect(()=>{d();const e=setInterval(o,6e4);return()=>clearInterval(e)},[]);const d=async()=>{const e=await z.getAllCountdowns(),t=(new Date).getTime(),s=e.filter(e=>e.targetDate.getTime()>t).sort((e,t)=>e.targetDate.getTime()-t.targetDate.getTime());s.length>0&&(n(s[0]),c(s[0].targetDate))},o=()=>{l&&c(l.targetDate)},c=e=>{const t=e.getTime()-(new Date).getTime(),s=Math.floor(t/36e5%24),a=Math.floor(t/864e5);i({days:a,hours:s})};return e.jsxs("div",{className:"glass-card p-5 rounded-3xl relative group h-full flex flex-col bg-blue-50/30 border-blue-100/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(s,{className:"h-4 w-4 text-blue-500"}),"Countdown"]}),e.jsx("button",{onClick:()=>a("/countdown"),className:"p-1.5 rounded-full hover:bg-blue-100 text-slate-400 hover:text-blue-600 transition-colors",children:e.jsx(t,{className:"h-4 w-4"})})]}),l&&r?e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsx("p",{className:"text-sm text-slate-500 font-medium truncate mb-1",children:l.title}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-bold text-slate-800",children:r.days}),e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase mr-2",children:"Days"}),e.jsx("span",{className:"text-xl font-bold text-slate-600",children:r.hours}),e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Hrs"})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-400 text-sm",children:"No active timers"})]})}function te(){const s=C(),[n,r]=_.useState([]);_.useEffect(()=>{i()},[]);const i=async()=>{const e=(await z.getAllTasks()).filter(e=>"done"!==(e.status||(e.completed?"done":"todo"))).sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime());r(e.slice(0,3))};return e.jsxs("div",{className:"glass-card p-5 rounded-3xl relative group h-full flex flex-col bg-emerald-50/30 border-emerald-100/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(a,{className:"h-4 w-4 text-emerald-500"}),"Tasks"]}),e.jsx("button",{onClick:()=>s("/tasks"),className:"p-1.5 rounded-full hover:bg-emerald-100 text-slate-400 hover:text-emerald-600 transition-colors",children:e.jsx(t,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex-1 space-y-3",children:n.length>0?n.map(t=>e.jsxs("div",{className:"flex items-center gap-3 group/item",children:[e.jsx("button",{onClick:()=>(async e=>{if(n.find(t=>t.id===e)){const t=await z.getAllTasks().then(t=>t.find(t=>t.id===e));if(t){const s={...t,status:"done"};await z.saveTask(s),r(n.filter(t=>t.id!==e))}}})(t.id),className:"text-slate-400 hover:text-emerald-500 transition-colors",children:e.jsx(l,{className:"h-4 w-4"})}),e.jsx("span",{className:"text-sm text-slate-600 truncate",children:t.text})]},t.id)):e.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 text-sm",children:"No pending tasks"})})]})}function se({id:t,children:s}){const{attributes:a,listeners:l,setNodeRef:n,transform:r,transition:i}=G({id:t}),d={transform:O.Transform.toString(r),transition:i,touchAction:"none"};return e.jsx("div",{ref:n,style:d,...a,...l,className:"touch-none h-full",children:s})}function ae({noteId:t,subjectId:s,initialTitle:a="",initialContent:l="",onClose:d,onSave:o}){const[c,x]=_.useState(a),[m,u]=_.useState(l),{addToast:h}=D();return e.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-slate-900 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("input",{type:"text",placeholder:"Note Title",value:c,onChange:e=>x(e.target.value),className:"text-lg font-bold bg-transparent border-none focus:outline-none flex-1 text-slate-800 dark:text-slate-100 placeholder:text-slate-400"}),e.jsxs("div",{className:"flex items-center gap-2",children:[t&&e.jsx("button",{onClick:async()=>{if(t&&window.confirm("Are you sure you want to delete this note?"))try{await z.deleteNote(t),h("Note deleted","info"),o(),d()}catch(e){}},className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Note",children:e.jsx(n,{className:"h-5 w-5"})}),e.jsxs("button",{onClick:async()=>{if(c.trim())try{const e=t||crypto.randomUUID();await z.saveNote({id:e,subjectId:s,title:c,content:m,updatedAt:new Date}),h("Note saved successfully","success"),o(),d()}catch(e){h("Failed to save note","error")}else h("Please enter a title","error")},className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors flex items-center gap-2",title:"Save Note",children:[e.jsx(r,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold text-sm",children:"Save"})]}),e.jsx("button",{onClick:d,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(i,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"flex-1 p-4 overflow-auto",children:e.jsx("textarea",{value:m,onChange:e=>u(e.target.value),placeholder:"Start typing your notes here...",className:"w-full h-full resize-none bg-transparent border-none focus:outline-none text-slate-700 dark:text-slate-300 leading-relaxed custom-scrollbar"})})]})}function le({isOpen:t,onClose:s,subjectName:a,subjectCode:l}){const[n,r]=_.useState([]),[x,m]=_.useState(null),[u,h]=_.useState(!1),[f,g]=_.useState(!0),p=l,j=async()=>{try{g(!0);const e=await z.getNotesBySubject(p);r(e||[])}catch(e){}finally{g(!1)}};if(_.useEffect(()=>{t&&j()},[t,p]),!t)return null;return T.createPortal(e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:s}),e.jsxs("div",{className:"relative w-full max-w-4xl h-[80vh] bg-white dark:bg-slate-900 rounded-3xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 flex",children:[e.jsxs("div",{className:A("w-full sm:w-1/3 border-r border-slate-200 dark:border-slate-800 flex flex-col transition-all duration-300",u?"hidden sm:flex":"flex"),children:[e.jsx("div",{className:"p-5 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50",children:e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary-100 flex items-center justify-center text-primary-600",children:e.jsx(d,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-slate-800 dark:text-slate-100 truncate max-w-[150px]",children:a}),e.jsx("p",{className:"text-xs text-slate-500 font-mono",children:l})]})]})}),e.jsx("div",{className:"p-4 space-y-3",children:e.jsxs("button",{onClick:()=>{m(null),h(!0)},className:"w-full py-3 px-4 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold shadow-lg shadow-primary-500/20 transition-all flex items-center justify-center gap-2",children:[e.jsx(o,{className:"h-5 w-5"}),e.jsx("span",{children:"New Note"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar bg-slate-50/30",children:f?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(t=>e.jsx("div",{className:"h-20 bg-slate-100 rounded-xl animate-pulse"},t))}):0===n.length?e.jsxs("div",{className:"text-center py-10 text-slate-400",children:[e.jsx(c,{className:"h-12 w-12 mx-auto mb-3 opacity-20"}),e.jsx("p",{className:"text-sm",children:"No notes yet."}),e.jsx("p",{className:"text-xs",children:"Create one to get started!"})]}):n.map(t=>e.jsxs("div",{onClick:()=>{m(t),h(!0)},className:A("p-4 rounded-xl border transition-all cursor-pointer hover:shadow-md text-left group",(null==x?void 0:x.id)===t.id?"bg-white border-primary-500 shadow-md ring-1 ring-primary-500":"bg-white border-slate-200 hover:border-primary-300"),children:[e.jsx("h3",{className:"font-bold text-slate-800 mb-1 truncate group-hover:text-primary-600 transition-colors",children:t.title}),e.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:t.content||"Empty note..."}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-2 text-right",children:new Date(t.updatedAt).toLocaleDateString()})]},t.id))})]}),e.jsx("div",{className:A("flex-1 flex flex-col bg-slate-50 dark:bg-slate-950",u?"flex":"hidden sm:flex"),children:u?e.jsx(ae,{noteId:null==x?void 0:x.id,subjectId:p,initialTitle:null==x?void 0:x.title,initialContent:null==x?void 0:x.content,onClose:()=>{h(!1),m(null)},onSave:j}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-300 p-8 text-center bg-slate-50/50",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(d,{className:"h-10 w-10 text-slate-400"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-400 mb-2",children:"Select a note to view"}),e.jsxs("p",{className:"max-w-xs mx-auto text-sm",children:["Or create a new one to start building your knowledge base for ",a,"."]})]})}),e.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 bg-white/50 hover:bg-white rounded-full text-slate-500 hover:text-red-500 transition-all z-10",children:e.jsx(i,{className:"h-5 w-5"})})]})]}),document.body)}const ne=x,re=_.forwardRef(({className:t,...s},a)=>e.jsx(m,{ref:a,className:A("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));re.displayName=m.displayName;const ie=_.forwardRef(({className:t,...s},a)=>e.jsx(u,{ref:a,className:A("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));ie.displayName=u.displayName;const de=_.forwardRef(({className:t,...s},a)=>e.jsx(h,{ref:a,className:A("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));function oe(){const{user:t}=I(),[s,a]=_.useState(0),[l,n]=_.useState(0),[r,i]=_.useState(""),[d,o]=_.useState("20"),[c,x]=_.useState(null);_.useEffect(()=>{t&&P.from("profiles").select("cgpa, credits").eq("id",t.id).single().then(({data:e})=>{e&&(a(e.cgpa||0),n(e.credits||0))})},[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl border border-indigo-100",children:[e.jsxs("h3",{className:"flex items-center gap-2 font-bold text-indigo-900 mb-2",children:[e.jsx(f,{className:"h-5 w-5"}),"Target Analyzer"]}),e.jsxs("p",{className:"text-sm text-indigo-700",children:["Current: ",e.jsx("span",{className:"font-bold",children:s})," (",l," Credits)"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Target CGPA"}),e.jsx(V,{type:"number",step:"0.01",max:"10",value:r,onChange:e=>i(e.target.value),placeholder:"e.g. 9.0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Next Sem Credits"}),e.jsx(V,{type:"number",value:d,onChange:e=>o(e.target.value),placeholder:"20"})]})]}),e.jsxs(W,{onClick:()=>{const e=parseFloat(r),t=parseFloat(d);if(!e||!t||t<=0)return;const a=(e*(l+t)-s*l)/t;x({requiredGPA:parseFloat(a.toFixed(2)),feasible:a<=10&&a>=0})},className:"w-full bg-slate-800 hover:bg-slate-900",children:[e.jsx(g,{className:"mr-2 h-4 w-4"})," Calculate Strategy"]}),c&&e.jsx("div",{className:A("p-4 rounded-xl border animate-in slide-in-from-top-2",c.feasible?"bg-emerald-50 border-emerald-200 text-emerald-800":"bg-red-50 border-red-200 text-red-800"),children:c.feasible?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold opacity-80 uppercase tracking-wider mb-1",children:"You need a GPA of"}),e.jsx("div",{className:"text-4xl font-black",children:c.requiredGPA}),e.jsx("div",{className:"text-sm mt-2 font-medium",children:"in the upcoming semester"})]}):e.jsxs("div",{className:"flex gap-3",children:[e.jsx(p,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Mathematically Impossible:"})," You would need a GPA of ",c.requiredGPA," to reach this goal next semester. Try adjusting your target or extending the timeline."]})]})})]})}function ce({isOpen:t,onClose:s}){const{user:a}=I(),{addToast:l}=D(),[n,r]=_.useState(!1),[i,d]=_.useState(""),[o,c]=_.useState([]),[x,m]=_.useState([]);return e.jsx($,{isOpen:t,onClose:s,title:"AI Academic Companion",className:"max-w-2xl",children:e.jsx("div",{className:"py-4 min-h-[400px]",children:e.jsxs(ne,{defaultValue:"scheduler",className:"w-full",children:[e.jsxs(re,{className:"grid w-full grid-cols-3 mb-6 bg-slate-100 p-1 rounded-xl",children:[e.jsxs(ie,{value:"scheduler",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[e.jsx(j,{className:"w-4 h-4 mr-2"})," Study Plan"]}),e.jsxs(ie,{value:"tasks",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[e.jsx(b,{className:"w-4 h-4 mr-2"})," Breaker"]}),e.jsxs(ie,{value:"grades",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[e.jsx(f,{className:"w-4 h-4 mr-2"})," Strategist"]})]}),e.jsxs(de,{value:"scheduler",className:"space-y-4 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 mb-4",children:[e.jsxs("h3",{className:"font-bold text-blue-900 flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4"})," Smart Scheduler"]}),e.jsx("p",{className:"text-sm text-blue-700",children:"I'll analyze your free slots and assign optimal study sessions."})]}),e.jsx("div",{className:"flex justify-center py-4",children:e.jsxs(W,{onClick:async()=>{r(!0);try{let e=["General Study"];if(a){const{data:t}=await P.from("smart_timetable_entries").select("subject_name").eq("user_id",a.id);t&&t.length>0&&(e=Array.from(new Set(t.map(e=>e.subject_name).filter(Boolean))))}const t=["Monday 18:00-20:00","Tuesday 19:00-21:00","Wednesday 18:00-20:00","Saturday 10:00-12:00","Sunday 14:00-16:00"],s=await K(t,e);m(s)}catch(e){l("Failed to create plan. Try again.","error")}finally{r(!1)}},disabled:n,size:"lg",className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full px-8",children:[n?e.jsx(v,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(N,{className:"h-4 w-4 mr-2"}),"Generate Weekly Plan"]})}),x.length>0&&e.jsx("div",{className:"space-y-2 mt-4",children:x.map((t,s)=>e.jsxs("div",{className:"flex items-center p-3 bg-white border rounded-lg shadow-sm",children:[e.jsx("div",{className:"w-2 h-12 bg-blue-500 rounded-full mr-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800",children:t.subject||"Study Session"}),e.jsxs("div",{className:"text-xs text-slate-500 font-medium uppercase",children:[t.day," â€¢ ",t.time]}),e.jsx("div",{className:"text-sm text-slate-600 mt-1",children:t.focus||"General Review"})]})]},s))})]}),e.jsxs(de,{value:"tasks",className:"space-y-4 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(V,{value:i,onChange:e=>d(e.target.value),placeholder:"e.g. Complete Final Year Project Report",className:"flex-1"}),e.jsx(W,{onClick:async()=>{if(i.trim()){r(!0);try{const e=await X(i);c(e)}catch(e){l("Failed to generate steps.","error")}finally{r(!1)}}},disabled:n,children:n?e.jsx(v,{className:"h-4 w-4 animate-spin"}):"Break Down"})]}),e.jsxs("div",{className:"space-y-2",children:[o.map((t,s)=>e.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 rounded-lg border border-slate-100",children:[e.jsx("div",{className:"bg-indigo-100 text-indigo-700 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0",children:s+1}),e.jsx("span",{className:"text-slate-700 text-sm",children:t})]},s)),0===o.length&&!n&&e.jsx("div",{className:"text-center text-slate-400 py-8 text-sm",children:"Enter a complex task, and I'll break it into manageable steps."})]})]}),e.jsx(de,{value:"grades",className:"animate-in fade-in slide-in-from-bottom-2",children:e.jsx(oe,{})})]})})})}function xe(){const{user:t}=I(),{streak:a}=q(),[l,n]=_.useState(null),[r,i]=_.useState(null),[o,c]=_.useState("Student"),[x,m]=_.useState(0),[u,h]=_.useState(!1),[f,g]=_.useState(new Date),[p,j]=_.useState(75),[N,v]=_.useState(0),[C,T]=_.useState(0),[D,z]=_.useState(null),[G,O]=_.useState(!1),[V,W]=_.useState(null);_.useEffect(()=>{const e=setInterval(()=>{g(new Date)},1e3);return()=>clearInterval(e)},[]),_.useEffect(()=>{if(!t)return;const e=async()=>{const{data:e}=await P.from("profiles").select("full_name, attendance_goal, cgpa, credits, avatar_url").eq("id",t.id).single();e&&(e.full_name&&c(e.full_name.split(" ")[0]),e.attendance_goal&&j(e.attendance_goal),e.cgpa&&v(e.cgpa),e.credits&&T(e.credits),e.avatar_url&&z(e.avatar_url));const s=(new Date).toLocaleDateString("en-US",{weekday:"long"}),a=["Saturday","Sunday"].includes(s)?"Monday":s,{data:l}=await P.from("timetable_entries").select("*").eq("user_id",t.id).eq("day",a),{data:r}=await P.from("smart_timetable_entries").select("*").eq("user_id",t.id).eq("day",a),d=[...l||[],...r||[]];d.sort((e,t)=>e.start_time.localeCompare(t.start_time));const o=new Date,x=o.getHours().toString().padStart(2,"0")+":"+o.getMinutes().toString().padStart(2,"0"),u=d.find(e=>e.start_time<=x&&e.end_time>x),h=d.find(e=>e.start_time>x);i(u||null),n(h||d[0]);const{data:f}=await P.from("attendance_logs").select("status").eq("user_id",t.id);if(f&&f.length>0){const e=f.filter(e=>"present"===e.status).length,t=f.length;m(Math.round(e/t*100))}};e();const s=setInterval(e,6e4);return()=>clearInterval(s)},[t]);const[$,K]=_.useState(()=>{const e=localStorage.getItem("dashboard-layout");return e?JSON.parse(e):["tasks","countdown"]}),X=F(M(Q),M(J,{coordinateGetter:H}));return e.jsxs("div",{className:"p-2 md:p-4 space-y-8 pb-32 animate-fade-in-up max-w-5xl mx-auto",children:[e.jsx(E,{title:"Dashboard",description:"View your daily schedule, attendance stats, and upcoming classes."}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[D?e.jsx("div",{className:"w-16 h-16 rounded-[1.5rem] overflow-hidden border border-white/50 shadow-2xl shadow-indigo-500/20 animate-breathe",children:e.jsx("img",{src:D,alt:"Profile",className:"w-full h-full object-cover"})}):e.jsx("div",{className:"w-16 h-16 rounded-[1.5rem] glass-vision flex items-center justify-center text-slate-400 border border-white/50 shadow-2xl animate-breathe",children:e.jsx(w,{className:"h-8 w-8 text-primary-300"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-semibold tracking-tighter text-slate-900 leading-none",children:["Hello, ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary-600 to-indigo-400",children:o})]}),e.jsx("p",{className:"text-lg text-slate-500 font-medium mt-1 tracking-wide font-display",children:"Your focus space is ready."})]})]}),e.jsxs("div",{className:"text-right hidden sm:flex items-center gap-4",children:[e.jsxs("div",{className:"glass-panel px-5 py-3 rounded-full flex items-center gap-2 animate-fade-in-up",children:[e.jsx(y,{className:A("h-6 w-6",a>0?"text-orange-500 fill-orange-500/20":"text-slate-300")}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-black text-slate-800 leading-none",children:a}),e.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest leading-none",children:"Day Streak"})]})]}),e.jsxs("div",{className:"glass-panel px-6 py-3 rounded-full",children:[e.jsx("div",{className:"text-3xl font-bold text-slate-800 tracking-tight font-variant-numeric tabular-nums",children:f.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}),e.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:f.toLocaleDateString([],{weekday:"long",month:"long",day:"numeric"})})]})]})]}),e.jsxs("div",{className:"sm:hidden glass-vision p-6 rounded-[2rem] flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider",children:f.toLocaleDateString([],{weekday:"short",day:"numeric"})}),a>0&&e.jsxs("div",{className:"flex items-center gap-1 bg-orange-50 px-2 py-1 rounded-lg",children:[e.jsx(y,{className:"h-3 w-3 text-orange-500 fill-orange-500"}),e.jsx("span",{className:"text-xs font-bold text-orange-600",children:a})]})]}),e.jsx("div",{className:"text-3xl font-black text-slate-800 font-variant-numeric tabular-nums",children:f.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-8",children:[e.jsxs("div",{className:A("relative overflow-hidden group transition-all duration-700 ease-out rounded-[2.5rem] min-h-[220px] flex flex-col justify-between p-8",r?"bg-white shadow-[0_30px_60px_rgba(255,100,100,0.2)] ring-1 ring-red-100/50":"bg-white shadow-[0_30px_60px_rgba(100,100,255,0.15)] ring-1 ring-white/60"),children:[e.jsx("div",{className:"absolute top-[-50%] right-[-20%] w-[400px] h-[400px] bg-gradient-to-br from-primary-200/40 to-indigo-200/40 rounded-full blur-[80px] animate-blob mix-blend-multiply opacity-60"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[r?e.jsxs("span",{className:"glass-panel px-4 py-2 rounded-full text-xs font-black text-red-500 uppercase tracking-widest flex items-center gap-2 animate-pulse shadow-red-200/50 shadow-lg",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," Live Now"]}):e.jsxs("span",{className:"glass-panel px-4 py-2 rounded-full text-xs font-black text-slate-500 uppercase tracking-widest flex items-center gap-2 shadow-sm",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-primary-400"})," Up Next"]}),(r||l)&&e.jsx("button",{onClick:()=>{return e=(r||l).subject_name,t=(r||l).subject_code,W({name:e,code:t}),void O(!0);var e,t},className:"glass-button p-4 rounded-full text-slate-600 hover:text-primary-600 hover:scale-110 active:scale-90",children:e.jsx(d,{className:"h-6 w-6"})})]}),r?e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 tracking-tighter leading-[0.9]",children:r.subject_name}),e.jsx("p",{className:"text-lg md:text-xl text-slate-500 font-medium tracking-wide",children:r.subject_code})]}):l?e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-slate-900 tracking-tighter leading-[0.9] opacity-90",children:l.subject_name}),e.jsx("p",{className:"text-lg md:text-xl text-slate-500 font-medium tracking-wide",children:l.subject_code})]}):e.jsx("div",{className:"py-6 text-center",children:e.jsx("p",{className:"text-2xl font-bold text-slate-300 tracking-tight",children:"No classes scheduled."})})]}),e.jsx("div",{className:"relative z-10 md:self-end mt-4 flex flex-wrap gap-3",children:(r||l)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass-panel px-6 py-4 rounded-[1.5rem] flex items-center gap-3",children:[e.jsx(s,{className:A("h-5 w-5",r?"text-red-500":"text-primary-500")}),e.jsx("span",{className:"text-lg font-bold text-slate-700 tracking-tight font-variant-numeric",children:r?r.end_time.slice(0,5):`${l.start_time.slice(0,5)} - ${l.end_time.slice(0,5)}`})]}),(r||l).room_number&&e.jsxs("div",{className:"glass-panel px-6 py-4 rounded-[1.5rem] flex items-center gap-3",children:[e.jsx(k,{className:"h-5 w-5 text-indigo-500"}),e.jsx("span",{className:"text-lg font-bold text-slate-700 tracking-tight",children:(r||l).room_number})]})]})})]}),e.jsx(L,{sensors:X,collisionDetection:R,onDragEnd:e=>{const{active:t,over:s}=e;s&&t.id!==s.id&&K(e=>{const a=e.indexOf(t.id),l=e.indexOf(s.id),n=Y(e,a,l);return localStorage.setItem("dashboard-layout",JSON.stringify(n)),n})},children:e.jsx(U,{items:$,strategy:B,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:$.map(t=>"tasks"===t?e.jsx(se,{id:t,children:e.jsxs("div",{className:"glass-vision p-6 rounded-[2rem] hover:scale-[1.02] transition-transform duration-500 h-full",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"w-8 h-8 rounded-xl bg-indigo-50 flex items-center justify-center text-indigo-600 shadow-sm",children:e.jsx(b,{className:"h-4 w-4"})}),e.jsx("span",{className:"text-base font-bold text-slate-700 tracking-tight",children:"Tasks"})]}),e.jsx(te,{})]})},t):"countdown"===t?e.jsx(se,{id:t,children:e.jsxs("div",{className:"glass-vision p-6 rounded-[2rem] hover:scale-[1.02] transition-transform duration-500 h-full",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"w-8 h-8 rounded-xl bg-yellow-50 flex items-center justify-center text-yellow-600 shadow-sm",children:e.jsx(s,{className:"h-4 w-4"})}),e.jsx("span",{className:"text-base font-bold text-slate-700 tracking-tight",children:"Countdown"})]}),e.jsx(ee,{})]})},t):null)})})})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[e.jsxs("div",{className:"glass-vision p-6 rounded-[2.5rem] text-center relative overflow-hidden group hover:shadow-2xl transition-all duration-500",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-emerald-400 to-emerald-200"}),e.jsx("div",{className:A("w-16 h-16 mx-auto rounded-[1.5rem] flex items-center justify-center mb-4 shadow-xl transition-transform group-hover:rotate-12 duration-500",x<p?"bg-red-50 text-red-500":"bg-emerald-50 text-emerald-500"),children:e.jsx(s,{className:"h-6 w-6"})}),e.jsxs("div",{className:"text-5xl font-bold text-slate-800 tracking-tighter mb-2 font-variant-numeric tabular-nums",children:[x,"%"]}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em]",children:"Attendance"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"glass-vision p-5 rounded-[2rem] flex flex-col items-center justify-center hover:-translate-y-2 transition-transform duration-500",children:[e.jsx("div",{className:"text-3xl font-bold text-slate-800 tracking-tighter font-variant-numeric",children:N>0?N:"-"}),e.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mt-1",children:"CGPA"})]}),e.jsxs("div",{className:"glass-vision p-5 rounded-[2rem] flex flex-col items-center justify-center hover:-translate-y-2 transition-transform duration-500",children:[e.jsx("div",{className:"text-3xl font-bold text-slate-800 tracking-tighter font-variant-numeric",children:C>0?C:"-"}),e.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mt-1",children:"Credits"})]})]}),e.jsx("div",{className:"glass-vision p-0 rounded-[2.5rem] overflow-hidden",children:e.jsx(Z,{})})]})]}),le&&V&&e.jsx(le,{isOpen:G,onClose:()=>O(!1),subjectName:V.name,subjectCode:V.code}),e.jsxs("button",{onClick:()=>h(!0),className:"fixed bottom-6 right-6 z-50 p-4 rounded-full bg-indigo-600 text-white shadow-xl hover:shadow-2xl hover:scale-110 transition-all duration-300 animate-in zoom-in group",children:[e.jsx(S,{className:"h-6 w-6 group-hover:rotate-12 transition-transform"}),e.jsx("span",{className:"absolute -top-2 -right-2 w-3 h-3 bg-red-500 rounded-full animate-pulse border-2 border-white"})]}),e.jsx(ce,{isOpen:u,onClose:()=>h(!1)})]})}de.displayName=h.displayName;export{xe as Dashboard};
